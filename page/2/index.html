<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://github.com/570911275/570911275.github.io/page/2/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://github.com/570911275/570911275.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-javaSSM之MyBatis基础知识之下小结" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/24/javaSSM之MyBatis基础知识之下小结/" class="article-date">
  <time datetime="2019-07-24T09:58:56.000Z" itemprop="datePublished">2019-07-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/24/javaSSM之MyBatis基础知识之下小结/">javaSSM之MyBatis基础知识之下小结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h2><pre><code>1. 基础知识（重点，内容多）
    对原生态jdbc程序（单独使用jdbc开发）问题总结√
    mybatis框架原理（掌握）√
    mybatis入门程序:√
         用户的增删改查√
    mybatis开发两种方法：
         原始dao开发方法（程序需要编写dao接口和dao实现类）（掌握）√
         mybaits的mapper接口（相当于dao接口）代理开发方法（掌握）√
    mybatis配置文件SqlMapConfig.xml√
    mybatis核心：
         mybatis输入映射（掌握）
         mybatis输出映射（掌握）
    mybatis的动态SQL（掌握）

 2. 高级知识
    订单商品数据模型分析
    高级结果集映射（一对一，一对多，多对多）
    mybatis延迟加载
    mybatis查询缓冲（一级缓冲、二级缓冲）
    mybaits和spring进行整合（掌握）
    mybatis逆向工程
</code></pre><h3 id="一、基础知识"><a href="#一、基础知识" class="headerlink" title="一、基础知识"></a>一、基础知识</h3><pre><code>1. 输入映射(*)
     * 通过parameterType指定输入参数的类型，类型可以是简单类型、hashmap、pojo的包装类型
     * 核心：传递pojo的包装对象
           * 当传入查询监听很复杂（可能包括用户信息、其他信息、比如商品、订单）为完成用户信息的综合查询，建议使用自定义的包装类型的pojo。
    1.1 传递pojo包装对象
       1. 定义包装对象：
           * 定义包装对象将查询条件(pojo)以类组合的方式包装起来
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public class UserQueryVo &#123;</span><br><span class="line">    //在这里包装所需要的查询条件</span><br><span class="line">    //用户查询条件</span><br><span class="line">    private UserCustom userCustom;</span><br><span class="line"></span><br><span class="line">    public UserCustom getUserCustom() &#123;</span><br><span class="line">        return userCustom;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setUserCustom(UserCustom userCustom) &#123;</span><br><span class="line">        this.userCustom = userCustom;</span><br><span class="line">    &#125;</span><br><span class="line">    //可以包装其他的查询条件，订单，商品</span><br><span class="line">    //....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>2. 定义用户的扩展类：
     * 定义一个扩展类，未来建立多表关联时使用
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public class UserCustom extends User &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>3. UserMapper.xml(映射文件)
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--用户信息的综合查询</span><br><span class="line">     #&#123;userCustom.sex&#125;:取出pojo包装对象中性别值</span><br><span class="line">     $&#123;userCustom.username&#125;:取出pojo包装对象中用户的名称--&gt;</span><br><span class="line">&lt;select id=&quot;findUserList&quot; parameterType=&quot;cn.itcast.po.UserQueryVo&quot;</span><br><span class="line">                          resultType=&quot;cn.itcast.po.UserCustom&quot;&gt;</span><br><span class="line">    select * from user where user.sex= #&#123;userCustom.sex&#125; and user.username like &apos;%$&#123;userCustom.username&#125;%&apos;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<pre><code>4. 测试类
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">public void findUserList() throws Exception &#123;</span><br><span class="line">    //mybatis配置文件</span><br><span class="line">    String resource = &quot;SqlMapConfig.xml&quot;;</span><br><span class="line">    //得到配置文件流</span><br><span class="line">    InputStream inputStream = Resources.getResourceAsStream(resource);</span><br><span class="line">    //创建会话工厂,传入mybatis的配置文件信息</span><br><span class="line">    SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line">    SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">    //创建UserMapper对象，mybatis自动生成mapper代理对象</span><br><span class="line">    UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    //创建包装对象，设置查询条件</span><br><span class="line">    UserQueryVo userQueryVo = new UserQueryVo();</span><br><span class="line">    UserCustom userCustom = new UserCustom();</span><br><span class="line">    userCustom.setSex(&quot;1&quot;);</span><br><span class="line">    userCustom.setUsername(&quot;小明&quot;);</span><br><span class="line">    userQueryVo.setUserCustom(userCustom);</span><br><span class="line"></span><br><span class="line">    //调用userMapper的方法</span><br><span class="line">    List&lt;UserCustom&gt; list = userMapper.findUserList(userQueryVo);</span><br><span class="line">    System.out.println(list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>2. 输出映射(*)
  1. resultType：
      使用resultType进行输出映射，只有查询出来的列名和pojo的属性名一致，该列才可以映射成功。
      如果查询出来的列名和pojo中的属性名全部不一致，没有创建pojo对象
      只要查询出来的列名和pojo中的属性有一个不一致，就会创建pojo对象
  2. resultMap：
      mybatis中使用resultMap完成高级输出结果映射
      如果查询出来的列名和pojo的属性名不一致，通过定义一个resultMap对列名和pojo属性名之间作一个映射关系
     2.1 使用步骤：
         1. 定义resultMap
         2. 使用resultMap作为statement的输出映射类型
     2.2 练习需求将下边的SQL使用UserCustom完成映射  
           * select id id_,username username_ from user where id=#{value}
           * user类中属性名和上边查询列名不一致
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">UserMapper.xml</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;!--定义resultMap</span><br><span class="line">        将SELECT id id_,username username_ FROM USER 和 User类中的属性作一个映射关系</span><br><span class="line">        type:resultMap最终映射的java对象类型，可以使用别名</span><br><span class="line">        id：对resultMap的唯一标识</span><br><span class="line">        --&gt;</span><br><span class="line"></span><br><span class="line">    &lt;resultMap type=&quot;user&quot; id=&quot;userResultMap&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!--id标识查询结果集中唯一标识</span><br><span class="line">            column：查询出来的列名</span><br><span class="line">            property：type指定的pojo类型中的属性名</span><br><span class="line">            最终resultMap对column和property作一个映射关系(对应关系)--&gt;</span><br><span class="line"></span><br><span class="line">        &lt;id column=&quot;id_&quot; property=&quot;id&quot;/&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!--result:对普通名映射定义</span><br><span class="line">            column:查询出来的列名</span><br><span class="line">            property：type指定的pojo类型中的属性名</span><br><span class="line">            最终resultMap对column和property作一个映射关系(对应关系)--&gt;</span><br><span class="line"></span><br><span class="line">        &lt;result column=&quot;username_&quot; property=&quot;username&quot;/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/resultMap&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--使用resultMap进行输出映射</span><br><span class="line">        resultMap:指定定义的resultMap的id，如果这个resultMap在其它的mapper文件，前边需要加namespace</span><br><span class="line">    --&gt;</span><br><span class="line"></span><br><span class="line">    &lt;select id=&quot;findUserByIdResultMap&quot; parameterType=&quot;int&quot; resultMap=&quot;userResultMap&quot;&gt;</span><br><span class="line">        select id id_,username username_ from user where id=#&#123;value&#125;</span><br><span class="line">    &lt;/select&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">测试类</span><br><span class="line"></span><br><span class="line">    public void findUserByIdRsultMap() throws Exception &#123;</span><br><span class="line">        //mybatis配置文件</span><br><span class="line">        String resource = &quot;SqlMapConfig.xml&quot;;</span><br><span class="line">        //得到配置文件流</span><br><span class="line">        InputStream inputStream = Resources.getResourceAsStream(resource);</span><br><span class="line">        //创建会话工厂,传入mybatis的配置文件信息</span><br><span class="line">        SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line">        SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">        //创建UserMapper对象，mybatis自动生成mapper代理对象</span><br><span class="line">        UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        //调用userMapper的方法</span><br><span class="line">        User user = userMapper.findUserByIdResultMap(1);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">UserMapper</span><br><span class="line"></span><br><span class="line">        //6.根据id查询用户信息使用resultMap输出</span><br><span class="line">        public User findUserByIdResultMap(int id) throws Exception;</span><br></pre></td></tr></table></figure>
<pre><code>     2.3 小结：
        * 使用resultType进行输出映射，只有查询出来的列名和pojo中的属性名一致，该列才可以映射成功。
        * 如果查询出来的列名和pojo的属性名不一致，通过定义搞一个resultMap对列名和pojo属性名之间做一个映射关系



3. 动态SQL
   3.1 概念：
       * mybatis核心对SQL语句进行灵活操作，通过表达式进行判断，对SQL进行灵活拼接、组装
   3.2 练习需求：
       * 用户信息综合查询列表和用户信息列表总数这两个statement的定义使用动态SQL 
            * 对查询条件进行判断，如果输入参数不为空，才进行查询条件的拼接
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">原sql:</span><br><span class="line"></span><br><span class="line">&lt;!--    &lt;select id=&quot;findUserList&quot; parameterType=&quot;cn.itcast.po.UserQueryVo&quot;--&gt;</span><br><span class="line">&lt;!--                              resultType=&quot;cn.itcast.po.UserCustom&quot;&gt;--&gt;</span><br><span class="line">&lt;!--        select * from user where user.sex= #&#123;userCustom.sex&#125; and user.username like &apos;%$&#123;userCustom.username&#125;%&apos;--&gt;</span><br><span class="line">&lt;!--    &lt;/select&gt;--&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">动态SQL：</span><br><span class="line"></span><br><span class="line">    &lt;select id=&quot;findUserCount&quot; parameterType=&quot;cn.itcast.po.UserQueryVo&quot;</span><br><span class="line">                               resultType=&quot;int&quot;&gt;</span><br><span class="line">         select count(*) from user</span><br><span class="line">        &lt;where&gt;</span><br><span class="line">            &lt;if test=&quot;userCustom!=null&quot;&gt;</span><br><span class="line">                &lt;if test=&quot;userCustom.sex!=null and userCustom.sex!=&apos;&apos;&quot;&gt;</span><br><span class="line">                    user.sex= #&#123;userCustom.sex&#125;</span><br><span class="line">                &lt;/if&gt;</span><br><span class="line">                &lt;if test=&quot;userCustom.username!=null and userCustom.username!=&apos;&apos;&quot;&gt;</span><br><span class="line">                    and user.username like &apos;%$&#123;userCustom.username&#125;%&apos;</span><br><span class="line">                &lt;/if&gt;</span><br><span class="line">            &lt;/if&gt;</span><br><span class="line">        &lt;/where&gt;</span><br><span class="line">    &lt;/select&gt;</span><br></pre></td></tr></table></figure>
<pre><code>3.3 SQL片段：
    * 练习需求：
         * 将上边实现的SQL判断代码块抽取出来，组成一个SQL片段。其他的statement中就可以引用SQL片段。
         * 方便程序员开发
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">sql片段</span><br><span class="line">    &lt;!--定义SQL片段--&gt;</span><br><span class="line">    &lt;!--id：SQL片段的唯一标识</span><br><span class="line">        使用include标签引用SQL片段的id,如果refid指定的id不在本map文件中，需要在前边加namespace</span><br><span class="line">        经验：是基于单表来定义SQL片段你，这样的话SQL片段的可重用性才高</span><br><span class="line">              在SQL片段中不要包括where--&gt;</span><br><span class="line">    &lt;sql id=&quot;query_user_where&quot;&gt;</span><br><span class="line">        &lt;if test=&quot;userCustom!=null&quot;&gt;</span><br><span class="line">            &lt;if test=&quot;userCustom.sex!=null and userCustom.sex!=&apos;&apos;&quot;&gt;</span><br><span class="line">                user.sex= #&#123;userCustom.sex&#125;</span><br><span class="line">            &lt;/if&gt;</span><br><span class="line">            &lt;if test=&quot;userCustom.username!=null and userCustom.username!=&apos;&apos;&quot;&gt;</span><br><span class="line">                and user.username like &apos;%$&#123;userCustom.username&#125;%&apos;</span><br><span class="line">            &lt;/if&gt;</span><br><span class="line">        &lt;/if&gt;</span><br><span class="line">    &lt;/sql&gt;</span><br><span class="line"></span><br><span class="line">引用</span><br><span class="line">           &lt;where&gt;</span><br><span class="line">                  &lt;include refid=&quot;query_user_where&quot;&gt;&lt;/include&gt;</span><br><span class="line">                  &lt;!--使用include标签引用SQL片段的id,如果refid指定的id不在本map文件中，需要在前边加namespace--&gt;</span><br><span class="line">                  &lt;!--在这里还要引用其他的SQL片段--&gt;</span><br><span class="line">           &lt;/where&gt;</span><br></pre></td></tr></table></figure>
<pre><code>3.4 foreach：
  1. 向SQL传递数组或list，mybatis使用foreach解析
  2. 练习需求
     * 在用户查询列表和查询总数的statement中增加多个id输入查询
     * SQL语句：
         * SELECT * FROM USER WHERE id=1 OR id=10 OR id=16
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">UserMapper.xnl</span><br><span class="line"></span><br><span class="line">    &lt;sql id=&quot;query_user_where&quot;&gt;</span><br><span class="line">        &lt;if test=&quot;userCustom!=null&quot;&gt;</span><br><span class="line">            &lt;if test=&quot;userCustom.sex!=null and userCustom.sex!=&apos;&apos;&quot;&gt;</span><br><span class="line">                user.sex= #&#123;userCustom.sex&#125;</span><br><span class="line">            &lt;/if&gt;</span><br><span class="line">            &lt;if test=&quot;userCustom.username!=null and userCustom.username!=&apos;&apos;&quot;&gt;</span><br><span class="line">                and user.username like &apos;%$&#123;userCustom.username&#125;%&apos;</span><br><span class="line">            &lt;/if&gt;</span><br><span class="line">            &lt;if test=&quot;ids!=null&quot;&gt;</span><br><span class="line">                &lt;!--使用foreach遍历IDS</span><br><span class="line">                    collection：指定输入对象中集合属性</span><br><span class="line">                    item：每个遍历生成对象名</span><br><span class="line">                    open：开始遍历时拼接的字符串</span><br><span class="line">                    close：结束遍历时拼接的字符串</span><br><span class="line">                    separator：遍历两个对象中需要拼接的字符串--&gt;</span><br><span class="line">                &lt;!--使用实现下边的SQL拼接</span><br><span class="line">                    AND (id=1 OR id=10 OR id=16)--&gt;</span><br><span class="line">                &lt;foreach collection=&quot;ids&quot; item=&quot;user_id&quot; open=&quot;AND(&quot; close=&quot;)&quot; separator=&quot;OR&quot;&gt;</span><br><span class="line">                  &lt;!--每次遍历需要拼接的字符串--&gt;</span><br><span class="line">                  id = #&#123;user_id&#125;</span><br><span class="line">                &lt;/foreach&gt;</span><br><span class="line">            &lt;/if&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/if&gt;</span><br><span class="line">    &lt;/sql&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">测试类</span><br><span class="line"></span><br><span class="line">        //传入多个id</span><br><span class="line">        List&lt;Integer&gt; ids = new ArrayList&lt;Integer&gt;();</span><br><span class="line">        ids.add(1);</span><br><span class="line">        ids.add(10);</span><br><span class="line">        ids.add(16);</span><br><span class="line">        userQueryVo.setIds(ids);</span><br><span class="line">        userQueryVo.setUserCustom(userCustom);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">UserMapper</span><br><span class="line"></span><br><span class="line">    //传入多个id</span><br><span class="line">    private List&lt;Integer&gt; ids;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/570911275/570911275.github.io/2019/07/24/javaSSM之MyBatis基础知识之下小结/" data-id="cjyxs69kh003lmgtnk4s8a4bs" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javaSSM-基础/">javaSSM_基础</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-javaSSM之MyBatis基础知识之中小结" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/24/javaSSM之MyBatis基础知识之中小结/" class="article-date">
  <time datetime="2019-07-24T08:38:36.000Z" itemprop="datePublished">2019-07-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/24/javaSSM之MyBatis基础知识之中小结/">javaSSM之MyBatis基础知识之中小结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h2><pre><code>1. 基础知识（重点，内容多）
    对原生态jdbc程序（单独使用jdbc开发）问题总结√
    mybatis框架原理（掌握）√
    mybatis入门程序:√
         用户的增删改查√
    mybatis开发两种方法：
         原始dao开发方法（程序需要编写dao接口和dao实现类）（掌握）
         mybaits的mapper接口（相当于dao接口）代理开发方法（掌握）
    mybatis配置文件SqlMapConfig.xml
    mybatis核心：
         mybatis输入映射（掌握）
         mybatis输出映射（掌握）
    mybatis的动态SQL（掌握）

 2. 高级知识
    订单商品数据模型分析
    高级结果集映射（一对一，一对多，多对多）
    mybatis延迟加载
    mybatis查询缓冲（一级缓冲、二级缓冲）
    mybaits和spring进行整合（掌握）
    mybatis逆向工程
</code></pre><h3 id="一、基础知识"><a href="#一、基础知识" class="headerlink" title="一、基础知识"></a>一、基础知识</h3><pre><code>1. mybatis和hibernate本质区别和应用场景
  1.1：hibernate：是一个标准的ORM框架（对象关系映射）。入门门槛较高的，不需要程序写SQL，SQL语句自动生成了。对SQL语句进行优化、修改比较困难的。
       应用场景：适用于需求变化不多的中小型项目，比如：后台管理系统：erp、orm、oa...
  1.2：mybatis：专注的是SQL本身，需要程序员自己编写SQL语句，SQL修改、优化比较方便。mybatis是一个不完全的orm框架，虽然程序员自己写SQL，mybatis也可以实现映射（输入映射、输出映射）
       应用场景：使用于需求变化较多的项目，比如互联网项目
2. SqlSession的作用范围
  2.1：SqlSessionFactoryBuilder：
         * 通过SqlSessionFactoryBuilder创建会话工厂SqlSessionFactoury
         * 将SqlSessionFactoryBuilder当成一个工具类使用即可，不需要使用单例管理SqlSessionFactoryBuilder
         * 在创建SqlSessionFactory时候，只需要new一此SqlSessionFactoryBuilder即可

  2.2：SqlSessionFactory：
         * 通过SqlSessionFactory创建SqlSessio
         * 使用单例模式guanliSqlSessionFactory（工厂一旦创建，使用一个实例）
         * 将来mybatis和spring整合后，使用单例模式管理SqlSessionFactory

  2.3：SqlSession：
         * SqlSession是一个面向用户（程序员）的接口
         * SqlSession中提供了很多操作数据库的方法：如：selectOne(返回单个对象)、selectList(返回单个或多个对象)
         * SqlSession是线程不安全的，在SqlSession实现类中除了有接口中的方法(操作数据库的方法)，还有数据域属性
         * SqlSession最佳应用场合在方法体内，定义成局部变量使用，这样可以避免内部变量被读写的同时又被修改。

3. 原始Dao开发方法（程序员需要写dao接口和dao实现类
  3.1：思路：
         * 程序员需要写dao接口和dao实现类
         * 需要向dao实现类中注入SqlSessionFacctory，在方法体内通过SqlSessionFactory创建SqlSession

  3.2：dao接口：
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public interface UserDao &#123;</span><br><span class="line">    //1.根据id查询用户信息，得到一条记录结果</span><br><span class="line">    public User findUserById(int id) throws Exception;</span><br><span class="line">    //2.添加用户</span><br><span class="line">    public void insertUser(User user) throws Exception;</span><br><span class="line">    //3.删除用户</span><br><span class="line">    public void deleteUser(int id) throws Exception;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>3.3：dao实现类：
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">//需要向dao实现类中注入SqlSessionFacctory，</span><br><span class="line">// 在方法体内通过SqlSessionFactory创建SqlSession</span><br><span class="line">public class UserDaoImpl implements UserDao &#123;</span><br><span class="line">    private SqlSessionFactory sqlSessionFactory;</span><br><span class="line">    //通过构造函数注入SqlSessionFacctory</span><br><span class="line">    public UserDaoImpl(SqlSessionFactory sqlSessionFactory) throws IOException &#123;</span><br><span class="line">        SqlSession sqlSession = null;</span><br><span class="line">        //mybatis配置文件</span><br><span class="line">        String resource = &quot;SqlMapConfig.xml&quot;;</span><br><span class="line">        //得到配置文件流</span><br><span class="line">        InputStream inputStream = Resources.getResourceAsStream(resource);</span><br><span class="line">        //创建会话工厂,传入mybatis的配置文件信息</span><br><span class="line">        sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line">        this.sqlSessionFactory = sqlSessionFactory;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public User findUserById(int id) throws Exception &#123;</span><br><span class="line">        SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">        User user = sqlSession.selectOne(&quot;test.findUserById&quot;,1);</span><br><span class="line">        sqlSession.close();</span><br><span class="line">        return user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void insertUser(User user) throws Exception &#123;</span><br><span class="line">        SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">        sqlSession.insert(&quot;test.insertUser&quot;,user);</span><br><span class="line">        sqlSession.commit();</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void deleteUser(int id) throws Exception &#123;</span><br><span class="line">        SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">        sqlSession.delete(&quot;test.deleteUser&quot;,id);</span><br><span class="line">        sqlSession.commit();</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>4. 原始dao开发问题
  4.1：dao接口实现类方法中存在大量模版方法，摄像能否将这些代码提取出来，大大减轻程序员的工作量

  4.2：调用sqlsession方法时将statement的id硬编码了

  4.3：调用sqlsession方法时传入的变量，由于sqlsession方法使用泛型，即使变量类型传入错误，在编译阶段也不报错，不利于程序员开发

5. mapper代理开发方法
  5.1：思路：
       * 程序员需要编写mapper.xml映射文件（如同前者原始的dao开发的user.xml不过多了开发规范）
       * 程序员编写mapper接口(相当于dao接口)需要遵循一些开发规范，mabatis就可以自动生成mapper接口实现类代理对象。

  5.2：开发规范：
       * 在mapper.xml中namespace等于mapper接口地址
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;mapper namespace=&quot;cn.itcast.mapper.UserMapper&quot;&gt;</span><br><span class="line">``` </span><br><span class="line">            * mapper.java接口中的方法名和mapper.xml中的statement的id一致</span><br><span class="line">            * </span><br><span class="line">            * mapper.java接口中的方法输入参数类型和mapper.xml中的parameterType指定的类型一致</span><br><span class="line">            * </span><br><span class="line">            * mapper.java接口中的方法返回值类型和mapper.xml中的statement的resultType指定的类型一致</span><br></pre></td></tr></table></figure>
<p>public User findUserById(int id) throws Exception;</p>
<p><select id="findUserById" parametertype="int" resulttype="cn.itcast.po.User"><br>//1.方法名为findUserById<br>//1.statement的id为findUserById<br>mapper.java接口中的方法名和mapper.xml中的statement的id两者相等</select></p>
<p>//2.输入参数类型为int<br>//2.paramenterType指定的类型为int<br>mapper.java接口中的方法输入参数类型和mapper.xml中的parameterType指定的类型两者相等</p>
<p>//3.返回值类型为User<br>//3.resultType指定的类型为cn.itcast.po.User<br>mapper.java接口中的方法返回值类型和mapper.xml中的statement的resultType指定的类型两者相等<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* 以上的开发规范主要是对下面的代码进行统一生成：</span><br></pre></td></tr></table></figure></p>
<p>sqlSession.insert(“test.updateUser”, user);<br>sqlSession.delete(“deleteUser”,40);<br>sqlSession.update(“test.updateUser”, user);<br>List<user> list = sqlSession.selectList(“test.findUserByName”, “小明”);<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5.3：代码实现</span><br></pre></td></tr></table></figure></user></p>
<p>SqlMapConfig.xml：<br>添加语句<br>    <mappers><br>        <mapper resource="User.xml"><br>      <strong><mapper resource="UserMapper.xml"></mapper></strong><br>    </mapper></mappers></p>
<p>userMapper.xml：<br>与User.xml相比，改动地点为：<br>在mapper.xml中namespace等于mapper接口地址</p>
<mapper namespace="cn.itcast.mapper.UserMapper">

<p>UserMapper.java<br>相当于dao中的接口层<br>public interface UserMapper {<br>        //1.根据id查询用户信息，得到一条记录结果<br>        public User findUserById(int id) throws Exception;<br>        //2.添加用户<br>        public void insertUser(User user) throws Exception;<br>        //3.删除用户<br>        public void deleteUser(int id) throws Exception;<br>}</p>
<p>测试类：<br>public class userMapperTest {<br>    @Test<br>    public void findUserById() throws Exception {<br>        //mybatis配置文件<br>        String resource = “SqlMapConfig.xml”;<br>        //得到配置文件流<br>        InputStream inputStream = Resources.getResourceAsStream(resource);<br>        //创建会话工厂,传入mybatis的配置文件信息<br>        SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);<br>        SqlSession sqlSession = sqlSessionFactory.openSession();<br>        //创建UserMapper对象，mybatis自动生成mapper代理对象<br>        UserMapper userMapper = sqlSession.getMapper(UserMapper.class);<br>        //调用userMapper的方法<br>        User user = userMapper.findUserById(1);<br>        System.out.println(user);<br>    }</p>
<p>}</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">    5.4：总结</span><br><span class="line">  	 1. selectOne和selectList：</span><br><span class="line">      动态代理对象调用sqlSession.selectOne()和sqlSession.selectList()是根据mapper接口方法的返回值决定，如果返回list则调用selectList方法，如果返回单个对象则调用selectOne方法。</span><br><span class="line"></span><br><span class="line">   2. namespace：</span><br><span class="line">      mybatis官方推荐使用mapper代理方法开发mapper接口，程序员不用编写mapper接口实现类，使用mapper代理方法时，输入参数可以使用pojo包装对象或map对象，保证dao的通用性。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   6. mybatis配置文件SqlMapConfig.xml</span><br><span class="line">       SqlMapConfig.xml中配置的内容和顺序如下：</span><br><span class="line">*properties（属性）</span><br><span class="line">*settings（全局配置参数）</span><br><span class="line">*typeAliases（类型别名）</span><br><span class="line">*typeHandlers（类型处理器）</span><br><span class="line">*objectFactory（对象工厂）</span><br><span class="line">*plugins（插件）</span><br><span class="line">*environments（环境集合属性对象）</span><br><span class="line">*environment（环境子属性对象）</span><br><span class="line">*transactionManager（事务管理）</span><br><span class="line">*dataSource（数据源）</span><br><span class="line">*mappers（映射器）</span><br><span class="line"></span><br><span class="line">     6.1 properties（属性）：</span><br><span class="line">          * 注意： MyBatis 将按照下面的顺序来加载属性：</span><br><span class="line">	 在 properties 元素体内定义的属性首先被读取。 </span><br><span class="line">	 然后会读取properties 元素中resource或 url 加载的属性，它会覆盖已读取的同名属性。 </span><br><span class="line">	 最后读取parameterType传递的属性，它会覆盖已读取的同名属性。</span><br><span class="line"></span><br><span class="line">          * 因此，通过parameterType传递的属性具有最高优先级，</span><br><span class="line">              resource或 url 加载的属性次之，</span><br><span class="line">              最低优先级的是 properties 元素体内定义的属性。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">     6.2 settings（全局配置参数）：</span><br><span class="line">          * mybatis框架在运行时可以调整一些运行参数</span><br><span class="line">            比如：开启二级缓存，开启延迟加载。。</span><br><span class="line">          * 全局参数将会影响mybatis的运行行为</span><br><span class="line">          * 详情参考E:\BaiduNetdiskDownload\Mybatis资料\mybatis资料\mybatis\day01\res\mybatis学习资料\mybatis-settings.xlsx</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">     6.3 typeAliases（类型别名）(*):</span><br><span class="line">          * mybatis默认的别名</span><br></pre></td></tr></table></figure>
<p>别名    映射的类型<br>_byte     byte<br>_long     long<br>_short     short<br>_int     int<br>_integer     int<br>_double     double<br>_float     float<br>_boolean     boolean<br>string     String<br>byte     Byte<br>long     Long<br>short     Short<br>int     Integer<br>integer     Integer<br>double     Double<br>float     Float<br>boolean     Boolean<br>date     Date<br>decimal     BigDecimal<br>bigdecimal     BigDecimal<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* 自定义别名</span><br><span class="line">   1. 针对单个别名定义</span><br><span class="line">      type：类型的路径</span><br><span class="line">      alias:别名--&gt;</span><br></pre></td></tr></table></figure></p>
<p><typealias type="cn.itcast.po.User" alias="user"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2. 批量别名定义(常用)</span><br><span class="line">   指定包名，mybatis自动扫描包中的po类</span><br><span class="line">   自动定义别名，别名就是类名（首字母大写或小写都可以）</span><br></pre></td></tr></table></figure></typealias></p>
<p><package name="cn.itcast.po"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">        6.4 typeHandlers（类型处理器）:</span><br><span class="line">类型处理器用于java类型和jdbc类型映射，如下：</span><br></pre></td></tr></table></figure></package></p>
<p><select id="findUserById" parametertype="int" resulttype="user"><br>        select * from user where id = #{id}<br></select><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mybatis自带的类型处理器基本上满足日常需求，不需要单独定义。</span><br><span class="line"></span><br><span class="line">mybatis支持类型处理器：</span><br></pre></td></tr></table></figure></p>
<p>类型处理器                    Java类型                         JDBC类型<br>BooleanTypeHandler             Boolean，boolean         任何兼容的布尔值<br>ByteTypeHandler             Byte，byte                 任何兼容的数字或字节类型<br>ShortTypeHandler             Short，short             任何兼容的数字或短整型<br>IntegerTypeHandler             Integer，int             任何兼容的数字和整型<br>LongTypeHandler             Long，long                 任何兼容的数字或长整型<br>FloatTypeHandler             Float，float             任何兼容的数字或单精度浮点型<br>DoubleTypeHandler             Double，double             任何兼容的数字或双精度浮点型<br>BigDecimalTypeHandler         BigDecimal                 任何兼容的数字或十进制小数类型<br>StringTypeHandler             String                     CHAR和VARCHAR类型<br>ClobTypeHandler             String                     CLOB和LONGVARCHAR类型<br>NStringTypeHandler             String                     NVARCHAR和NCHAR类型<br>NClobTypeHandler             String                     NCLOB类型<br>ByteArrayTypeHandler         byte[]                     任何兼容的字节流类型<br>BlobTypeHandler             byte[]                     BLOB和LONGVARBINARY类型<br>DateTypeHandler             Date（java.util）        TIMESTAMP类型<br>DateOnlyTypeHandler         Date（java.util）        DATE类型<br>TimeOnlyTypeHandler         Date（java.util）        TIME类型<br>SqlTimestampTypeHandler     Timestamp（java.sql）    TIMESTAMP类型<br>SqlDateTypeHandler             Date（java.sql）            DATE类型<br>SqlTimeTypeHandler             Time（java.sql）            TIME类型<br>ObjectTypeHandler             任意                        其他或未指定类型<br>EnumTypeHandler             Enumeration类型            VARCHAR-任何兼容的字符串类型，作为代码存储（而不是索引）。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">6.5 mappers（映射器）自动代理</span><br><span class="line">    1.单个加载mapper</span><br><span class="line">     通过mapper接口加载映射文件</span><br><span class="line">     需要将mapper接口类名和mapper.xml映射文件名称保持一致</span><br><span class="line">     且在一个目录中</span><br><span class="line">     上边规范的前提是：使用的是mapper代理的方法</span><br></pre></td></tr></table></figure></p>
<p><mapper class="cn.itcast.mapper.UserMapper"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">2.批量加载mapper</span><br><span class="line">  指定mapper接口的报名，mybatis自动扫描包下边所有mapper接口进行加载</span><br><span class="line">  需要将mapper接口类名和mapper.xml映射文件名称保持一致</span><br><span class="line">  且在一个目录中</span><br><span class="line">  上边规范的前提是：使用的是mapper代理的方法</span><br></pre></td></tr></table></figure></mapper></p>
<p><package name="cn.itcast.mapper"><br><code>`</code><br>        6.6 mappers（映射器）自动代理的常用语句<br>6.6.1    <mapper resource=" "><br>使用相对于类路径的资源<br>如：<mapper resource="sqlmap/User.xml"></mapper></mapper></package></p>
<p>6.6.2    <mapper url=" "><br>使用完全限定路径<br>如：<mapper url="file:///D:\workspace_spingmvc\mybatis_01\config\sqlmap\User.xml"></mapper></mapper></p>
<p>6.6.3    <mapper class=" "><br>使用mapper接口类路径<br>如：<mapper class="cn.itcast.mybatis.mapper.UserMapper"></mapper></mapper></p>
<p>注意：此种方法要求mapper接口名称和mapper映射文件名称相同，且放在同一个目录中。</p>
<p>6.6.4    <package name><br>注册指定包下的所有mapper接口<br>如：<package name="cn.itcast.mybatis.mapper"><br>注意：此种方法要求mapper接口名称和mapper映射文件名称相同，且放在同一个目录中。</package></package></p>
</mapper>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/570911275/570911275.github.io/2019/07/24/javaSSM之MyBatis基础知识之中小结/" data-id="cjyxs69kk003nmgtnq593mtol" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javaSSM-基础/">javaSSM_基础</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-javaSSM之MyBatis基础知识之上小结" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/24/javaSSM之MyBatis基础知识之上小结/" class="article-date">
  <time datetime="2019-07-24T07:34:16.000Z" itemprop="datePublished">2019-07-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/24/javaSSM之MyBatis基础知识之上小结/">javaSSM之MyBatis基础知识之上小结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h2><pre><code>1. 基础知识（重点，内容多）
    对原生态jdbc程序（单独使用jdbc开发）问题总结
    mybatis框架原理（掌握）
    mybatis入门程序
         用户的增删改查
    mybatis开发两种方法：
         原始dao开发方法（程序需要编写dao接口和dao实现类）（掌握）
         mybaits的mapper接口（相当于dao接口）代理开发方法（掌握）
    mybatis配置文件SqlMapConfig.xml
    mybatis核心：
         mybatis输入映射（掌握）
         mybatis输出映射（掌握）
    mybatis的动态SQL（掌握）

 2. 高级知识
    订单商品数据模型分析
    高级结果集映射（一对一，一对多，多对多）
    mybatis延迟加载
    mybatis查询缓冲（一级缓冲、二级缓冲）
    mybaits和spring进行整合（掌握）
    mybatis逆向工程
</code></pre><h3 id="一、基础知识"><a href="#一、基础知识" class="headerlink" title="一、基础知识"></a>一、基础知识</h3><h4 id="1-对原生jdbc程序问题总结"><a href="#1-对原生jdbc程序问题总结" class="headerlink" title="1. 对原生jdbc程序问题总结"></a>1. 对原生jdbc程序问题总结</h4><pre><code>1.1 环境搭建：
     * java环境：jdk
     * 数据库环境：mysql
     * 集成开发环境：idea

1.2 创建mysql数据库
     * sql_data.sql：记录表结构
     * sql_table.sql：记录测试数据，在实际企业开发中，最后提供一个初始化数据脚本

1.3 jdbc程序
     * 使用jdbc程序查询mysql数据库中用户表的记录
         * 创建java工程
         * 导入jar包（数据库驱动包）
         * 编写java程序代码

1.4 问题总结
     1. 数据库连接使用时就创建，不使用立即释放，对数据库进行频繁连接开启和关闭，造成数据库资源浪费影响数据库性能
         * 解决方案：
             * 使用数据库连接池管理数据库连接

     2. 将SQL语句硬编码（SQL语句在java代码中写死）到java中，如果SQL语句修改，需要重新编译java代码，不利于系统维护
         * 解决方案：
              * 将SQL语句配置在xml配置文件中，即使SQL变化，不需要对java代码进行重新编译

     3. 向preparedStatement中设置参数，对占位符位置和设置参数值，硬编码在java代码中，不利于系统维护
         * 解决方案：
              * 将SQL语句以及占位符合和参数全部配置在xml文件中

     4. 从resutSet中遍历结果集数据时，存在硬编码，将获取表的字段进行硬编码，不利于系统卫华
         * 解决方案：
              * 将查询的结果集，自动映射成java对象   
</code></pre><h4 id="2-mybatis框架"><a href="#2-mybatis框架" class="headerlink" title="2.mybatis框架"></a>2.mybatis框架</h4><pre><code>2.1 mybatis是什么
     * mybatis是一个持久层的框架，是Apache下的顶级项目
     * mybatis托管到goolecode下，再后来托管到github下
     * mybatis让程序员将主要精力放在SQL上，通过mybatis提供的映射方式，自由灵活生成（半自动化，大部分需要程序员编写SQL）满足SQL语句
     * mybatis可以将向preparedStatement中的输入参数自动输入映射，将查询结果集灵活映射出java对象（输出映射）

2.2 mybatis框架
        —————————————————————————————————————————————————————————————————           
        | * SqlMapConfig.xml(是mybatis的全局配置文件，名称不固定的)         
        | * 配置了数据源、事务等mybatis运行环境                             
        | * 配置映射文件（配置SQL语句）                                     
        |      * 配置在mapper.xml(映射文件)、mapper.xml\mapper.xml....中    
        |                                                                 
        ——————————————————————————————————————————————————————————————————
                                 ||
                                 ||
                                 \/
       ————————————————————————————————————————————————————————————————————
       |  * SqlSessionFactory(会话工厂)【根据配置文件创建工程】
       |     * 作用：创建SqlSession
       —————————————————————————————————————————————————————————————————————
                                 ||
                                 ||
                                 \/
      ————————————————————————————————————————————————————————————————————————
     |   * SqlSession（会话）【面向用户（程序员）的接口】
     |     * 作用：操作数据库（发出SQL增、删、改、查）
      _________________________________________________________________________
                                 ||
                                 ||
                                 \/
      —————————————————————————————————————————————————————————————————————————— 
     |   * Executor(执行器)【是一个接口(基本执行器，缓冲执行器)】
     |      * 作用：SqlSession内部通过执行器操作数据库
      ———————————————————————————————————————————————————————————————————————————   
                                 ||
                                 ||
                                 \/
      ————————————                                                            ——————————
     *|  输入参数  |                                                          |  输出结果
     *|  类型      |    ————————————————————————————————————————————————      |  类型
      |            |   |  * mapped ststement(底层封装对象)               |     |
     *|  java简单  |——&gt; |         * 作用：对操作数据库存储封装，包括SQL语句 |——&gt;  | java简单
     *|  类型      |    |             **输入参数、输出结果类型**          |     | 类型 
     *|  hashmap   |    ————————————————————————————————————————————————     |  hashmap 
      |            |                 ||                                      |
     *|  pojo自定义 |                 ||                                     | polo自定义 
      —————————————                 \  /                                       ——————————————
                                 ——————————————        
     *                          | mysql数据库 
     *                          ————————————————
</code></pre><h4 id="3-入门程序"><a href="#3-入门程序" class="headerlink" title="3.入门程序"></a>3.入门程序</h4><h5 id="3-1-需求"><a href="#3-1-需求" class="headerlink" title="3.1 需求"></a>3.1 需求</h5><pre><code>* 根据用户id（主键）查询用户信息
* 根据用户名称模糊查询用户信息
* 添加用户
* 删除用户
* 更新用户
</code></pre><h5 id="3-2-环境"><a href="#3-2-环境" class="headerlink" title="3.2 环境"></a>3.2 环境</h5><pre><code>* java环境：jdk
* 数据库环境：mysql
* 集成开发环境：idea
* mybatis运行环境：jar包
</code></pre><h5 id="3-3-根据用户id查询用户信息"><a href="#3-3-根据用户id查询用户信息" class="headerlink" title="3.3 根据用户id查询用户信息"></a>3.3 根据用户id查询用户信息</h5><pre><code>1. 映射文件命名：
    Userxml（原始ibatis命名），mapper代理开发映射文件名称叫xxxMapper.xml，比如：UserMapper.xml
2. 在映射文件中配置SQL语句
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">**测试类**</span><br><span class="line"></span><br><span class="line">package cn.itcast.first;</span><br><span class="line"></span><br><span class="line">import cn.itcast.po.User;</span><br><span class="line">import org.apache.ibatis.io.Resources;</span><br><span class="line">import org.apache.ibatis.session.*;</span><br><span class="line">import org.junit.Test;</span><br><span class="line"></span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.InputStream;</span><br><span class="line"></span><br><span class="line">public class myBatisFirst &#123;</span><br><span class="line">    //1.根据id查询用户信息，得到一条记录结果</span><br><span class="line">    @Test</span><br><span class="line">    public void findUserByIdTest()  &#123;</span><br><span class="line">        User user = null;</span><br><span class="line">        SqlSession sqlSession = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            //mybatis配置文件</span><br><span class="line">            String resource = &quot;SqlMapConfig.xml&quot;;</span><br><span class="line">            //得到配置文件流</span><br><span class="line">            InputStream inputStream = Resources.getResourceAsStream(resource);</span><br><span class="line">            //创建会话工厂,传入mybatis的配置文件信息</span><br><span class="line">            SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line">            //通过工厂得到SqlSession</span><br><span class="line">            sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">            //通过SqlSession操作数据库</span><br><span class="line">            //第一个参数：映射文件中Statement的id,等于namespace+&quot;.&quot;+statement的id</span><br><span class="line">            //第二个参数：指定和映射文件中所匹配的paramenterType类型的参数</span><br><span class="line">            //sqlSession.selectOne结果是于映射文件中所匹配的resultType类型的对象</span><br><span class="line">            user = sqlSession.selectOne(&quot;test.findUserById&quot;,1);</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">**SqlMapConfig.xml**</span><br><span class="line"></span><br><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE configuration</span><br><span class="line">        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span><br><span class="line">        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;!-- 和spring整合后 environments配置将废除--&gt;</span><br><span class="line">    &lt;environments default=&quot;development&quot;&gt;</span><br><span class="line">        &lt;environment id=&quot;development&quot;&gt;</span><br><span class="line">            &lt;!-- 使用jdbc事务管理，事务控制有mybatis控制--&gt;</span><br><span class="line">            &lt;transactionManager type=&quot;JDBC&quot; /&gt;</span><br><span class="line">            &lt;!-- 数据库连接池--&gt;</span><br><span class="line">            &lt;dataSource type=&quot;POOLED&quot;&gt;</span><br><span class="line">                &lt;property name=&quot;driver&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot; /&gt;</span><br><span class="line">                &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/mybatis?serverTimezone=UTC&quot; /&gt;</span><br><span class="line">                &lt;property name=&quot;username&quot; value=&quot;root&quot; /&gt;</span><br><span class="line">                &lt;property name=&quot;password&quot; value=&quot;a570911275&quot; /&gt;</span><br><span class="line">            &lt;/dataSource&gt;</span><br><span class="line">        &lt;/environment&gt;</span><br><span class="line">    &lt;/environments&gt;</span><br><span class="line">    &lt;!--加载映射文件--&gt;</span><br><span class="line">    &lt;mappers&gt;</span><br><span class="line">        &lt;mapper resource=&quot;User.xml&quot;/&gt;</span><br><span class="line">    &lt;/mappers&gt;</span><br><span class="line"></span><br><span class="line">&lt;/configuration&gt;</span><br><span class="line"></span><br><span class="line">**User.xml(映射文件)**</span><br><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper</span><br><span class="line">        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span><br><span class="line">        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span><br><span class="line">&lt;!--namespce命名空间，作用就是对SQL进行分类化管理，SQL隔离--&gt;</span><br><span class="line">&lt;!--使用mapper代理开发，namespace有特殊的重要作用--&gt;</span><br><span class="line">&lt;mapper namespace=&quot;test&quot;&gt;</span><br><span class="line">    &lt;!--在映射文件中配置SQL语句--&gt;</span><br><span class="line">    &lt;!--通过select执行数据库查询--&gt;</span><br><span class="line">    &lt;!--id标识映射文件中的SQL，称为statement中的id--&gt;</span><br><span class="line">    &lt;!--将SQL语句封装到mappedStatement对象中--&gt;</span><br><span class="line">    &lt;!--#&#123;&#125;表示一个占位符--&gt;</span><br><span class="line">    &lt;!--parameterType指定输入参数的类型--&gt;</span><br><span class="line">    &lt;!--#&#123;id&#125;其中的id表示接受输入的参数，参数名称就是id，</span><br><span class="line">    如果输入参数是简单类型，#&#123;&#125;中的参数名可以任意--&gt;</span><br><span class="line">    &lt;!--resultType指定输出结果所映射的java对象类型，</span><br><span class="line">    select指定resultType表示将单条记录映射成java对象--&gt;</span><br><span class="line">    &lt;select id=&quot;findUserById&quot; parameterType=&quot;int&quot; resultType=&quot;cn.itcast.po.User&quot;&gt;</span><br><span class="line">         SELECT * FROM USER WHERE id=#&#123;id&#125;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>
<h5 id="3-4-根据用户名称模糊查询用户信息"><a href="#3-4-根据用户名称模糊查询用户信息" class="headerlink" title="3.4 根据用户名称模糊查询用户信息"></a>3.4 根据用户名称模糊查询用户信息</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">**测试类**</span><br><span class="line"></span><br><span class="line">前面创建会话过程同3.2一样</span><br><span class="line">//通过SqlSession操作数据库</span><br><span class="line">//第一个参数：映射文件中Statement的id,等于namespace+&quot;.&quot;+statement的id</span><br><span class="line">//第二个参数：指定和映射文件中所匹配的paramenterType类型的参数</span><br><span class="line">//sqlSession.selectOne结果是于映射文件中所匹配的resultType类型的对象</span><br><span class="line">List&lt;User&gt; list = sqlSession.selectList(&quot;test.findUserByName&quot;, &quot;小明&quot;);</span><br><span class="line">System.out.println(list);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">**User.xml(映射文件)**</span><br><span class="line">    &lt;!--根据用户名称模糊查询用户信息,可能返回多条</span><br><span class="line">        resultType：指定就是单条记录所映射的java对象类型</span><br><span class="line">        $&#123;&#125;：表示拼接SQL串，将接收到的参数内容不加任何修饰拼接在SQL中</span><br><span class="line">        使用$&#123;&#125;拼接SQL，引起SQL注入</span><br><span class="line">        $&#123;value&#125;：接收输入参数的内容，如果传入类型是简单类型的，$&#123;&#125;中只能使用value--&gt;</span><br><span class="line">    &lt;select id=&quot;findUserByName&quot; parameterType=&quot;java.lang.String&quot; resultType=&quot;cn.itcast.po.User&quot;&gt;</span><br><span class="line">        SELECT * FROM USER WHERE USERNAME LIKE &apos;%$&#123;value&#125;%&apos;</span><br><span class="line">    &lt;/select&gt;</span><br></pre></td></tr></table></figure>
<h5 id="3-5-添加用户"><a href="#3-5-添加用户" class="headerlink" title="3.5 添加用户"></a>3.5 添加用户</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">**测试类**</span><br><span class="line"></span><br><span class="line">            //创建User对象</span><br><span class="line">            User user = new User();</span><br><span class="line">            user.setUsername(&quot;黄二丫&quot;);</span><br><span class="line">            user.setBirthday(new Date());</span><br><span class="line">            user.setSex(&quot;1&quot;);</span><br><span class="line">            user.setAddress(&quot;广东陆丰&quot;);</span><br><span class="line">            sqlSession.insert(&quot;test.insertUser&quot;, user);</span><br><span class="line">            //提交事务</span><br><span class="line">            sqlSession.commit();</span><br><span class="line">            //获取用户信息主键</span><br><span class="line">            System.out.println(user.getId());</span><br><span class="line">            //关闭会话</span><br><span class="line">            sqlSession.close();</span><br><span class="line"></span><br><span class="line">**User.xml(映射文件)**</span><br><span class="line">    &lt;insert id=&quot;insertUser&quot; parameterType=&quot;cn.itcast.po.User&quot; &gt;</span><br><span class="line">        &lt;!--</span><br><span class="line">        将插入数据的主键返回，返回到user对象中</span><br><span class="line">        SELECT LAST_INSERT_ID():得到刚insert进去记录的主键值，只适用于自增主键</span><br><span class="line">        keyProperty：将查询到主键值设置到parameterType指定的对象的哪一个属性</span><br><span class="line">        order：SELECT LAST_INSERT_ID()执行顺序，相对于insert语句来说它的执行顺序</span><br><span class="line">        resultType：指定SELECT LAST_INSERT_ID()的结果类型</span><br><span class="line">        --&gt;</span><br><span class="line">        &lt;selectKey keyProperty=&quot;id&quot; order=&quot;AFTER&quot; resultType=&quot;java.lang.Integer&quot;&gt;</span><br><span class="line">            SELECT LAST_INSERT_ID()</span><br><span class="line">        &lt;/selectKey&gt;</span><br><span class="line">        insert into user(username,birthday,sex,address) values(#&#123;username&#125;,#&#123;birthday&#125;,#&#123;sex&#125;,#&#123;address&#125;)</span><br><span class="line">        &lt;!--</span><br><span class="line">        使用mysql的uuid()进行主键的返回（非自增主键）</span><br><span class="line">        执行思路：</span><br><span class="line">        先通过uuid()查询到主键，将主键设置到user对象中的id属性</span><br><span class="line">        在insert执行时，从user对象中取出id属性值</span><br><span class="line">        执行uuid()顺序相对于insert语句之前--&gt;</span><br><span class="line">        &lt;selectKey keyProperty=&quot;id&quot; order=&quot;AFTER&quot; resultType=&quot;java.lang.Integer&quot;&gt;</span><br><span class="line">            SELECT uuid()</span><br><span class="line">        &lt;/selectKey&gt;</span><br><span class="line">        insert into user(id,username,birthday,sex,address) values(#&#123;id&#125;,#&#123;username&#125;,#&#123;birthday&#125;,#&#123;sex&#125;,#&#123;address&#125;)</span><br><span class="line">    &lt;/insert&gt;</span><br></pre></td></tr></table></figure>
<h5 id="3-6-添加用户-返回主键"><a href="#3-6-添加用户-返回主键" class="headerlink" title="3.6 添加用户__返回主键"></a>3.6 添加用户__返回主键</h5><p>1.返回自增主键：<br>        将插入数据的主键返回，返回到user对象中<br>        SELECT LAST_INSERT_ID():得到刚insert进去记录的主键值，只适用于自增主键<br>        keyProperty：将查询到主键值设置到parameterType指定的对象的哪一个属性<br>        order：SELECT LAST_INSERT_ID()执行顺序，相对于insert语句来说它的执行顺序<br>        resultType：指定SELECT LAST_INSERT_ID()的结果类型<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">        &lt;selectKey keyProperty=&quot;id&quot; order=&quot;AFTER&quot; resultType=&quot;java.lang.Integer&quot;&gt;</span><br><span class="line">            SELECT LAST_INSERT_ID()</span><br><span class="line">        &lt;/selectKey&gt;</span><br><span class="line">``` </span><br><span class="line">2.返回非自增主键</span><br><span class="line">        使用mysql的uuid()进行主键的返回（非自增主键）</span><br><span class="line">        执行思路：</span><br><span class="line">        先通过uuid()查询到主键，将主键设置到user对象中的id属性</span><br><span class="line">        在insert执行时，从user对象中取出id属性值</span><br><span class="line">        执行uuid()顺序相对于insert语句之前</span><br></pre></td></tr></table></figure></p>
<pre><code>&lt;selectKey keyProperty=&quot;id&quot; order=&quot;AFTER&quot; resultType=&quot;java.lang.Integer&quot;&gt;
    SELECT uuid()
&lt;/selectKey&gt;
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">#####      3.7 删除用户</span><br></pre></td></tr></table></figure>
<p><strong>测试类</strong></p>
<pre><code>sqlSession.delete(&quot;deleteUser&quot;,40);
sqlSession.commit();
</code></pre><p><strong>User.xml(映射文件)</strong></p>
<pre><code>&lt;!--删除用户
    根据用户id删除用户--&gt;
&lt;delete id=&quot;deleteUser&quot; parameterType=&quot;java.lang.Integer&quot;&gt;
    delete from user where id = #{id}
&lt;/delete&gt;
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">#####      3.8 更新用户</span><br></pre></td></tr></table></figure>
<p><strong>测试类</strong></p>
<pre><code>User user = new User();
user.setId(41);
user.setUsername(&quot;黄三丫&quot;);
user.setBirthday(new Date());
user.setSex(&quot;1&quot;);
user.setAddress(&quot;广东陆丰&quot;);
sqlSession.insert(&quot;test.updateUser&quot;, user);
//提交事务
sqlSession.commit();
//获取用户信息主键
System.out.println(user.getId());
//关闭会话
sqlSession.close();
</code></pre><p><strong>User.xml</strong></p>
<pre><code>&lt;update id=&quot;updateUser&quot; parameterType=&quot;cn.itcast.po.User&quot;&gt;
    update user set username=#{username},birthday=#{birthday},sex=#{sex},address=#{address} where id=#{id}
&lt;/update&gt;
</code></pre><p><code>`</code></p>
<h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h5><pre><code>1. parameterType：指定输入参数的类型
2. resultType   ：指定输出结果所映射的java对象类型
3. 如果输入参数是简单类型，#{}中的参数名可以任意
4. 如果传入类型是简单类型的，${}中只能使用value
5. 除了select查询语句之外，其他add，delete，update等增、删、改等语句皆需要提交
6. ${}：表示拼接SQL串，将接收到的参数内容不加任何修饰拼接在SQL中；使用${}拼接SQL，引起SQL注入
        ${}接收输入参数类型可以是简单类型、pojo、hashmap
        如果接收简单类型，${}中只能写成value
        ${}接收pojo对象值，通过OGNL读取对象中的属性值，通过属性.属性.属性...的方式获取对象属性值。
7. #{}：表示一个占位符，#{}接收输入参数类型可以是简单类型、pojo、hashmap
        如果接收简单类型，${}中可以写成value或其他名称
        ${}接收pojo对象值，通过OGNL读取对象中的属性值，通过属性.属性.属性...的方式获取对象属性值。                
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/570911275/570911275.github.io/2019/07/24/javaSSM之MyBatis基础知识之上小结/" data-id="cjyxs69ln0043mgtnj6h74mwf" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javaSSM-基础/">javaSSM_基础</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-新文档" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/23/新文档/" class="article-date">
  <time datetime="2019-07-23T11:16:14.579Z" itemprop="datePublished">2019-07-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="综合练习"><a href="#综合练习" class="headerlink" title="综合练习"></a>综合练习</h2><pre><code>1. 简单功能
    1. 列表查询
    2. 登录
    3. 添加
    4. 删除
    5. 修改
2. 复杂功能
    1. 删除选中
    2. 分页查询
    3. 条件查询
    4. 复杂条件查询，带有分页效果
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/570911275/570911275.github.io/2019/07/23/新文档/" data-id="cjyxs69hy002rmgtnhqbol6or" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-新文档2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/22/新文档2/" class="article-date">
  <time datetime="2019-07-22T11:42:57.000Z" itemprop="datePublished">2019-07-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/22/新文档2/">JavaEE之MyBatis小结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h2><pre><code>1. MyBatis简介：开源免费框架，原名叫iBatis，2010年在Googlecode，2013年迁移到github。

2. MyBatis概念：
      1. mybatis是对jdbc的封装
      2. 将SQL语句放在映射文件中（xml）
      3. 自动将输入参数映射到SQL语句的动态参数上
      4. 自动将SQL语句执行的结果映射成java对象

3. 步骤
      1. 创建mybatis，java项目，maven

      2. 导入jar包
           * log4j
           * mybatis
           * mysql-connnec-java

      3. 加入配置文件
         （1）db.properties
          (2) log4j.properties
          (3) mybatis.xml
          (4)
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/570911275/570911275.github.io/2019/07/22/新文档2/" data-id="cjyxs69i6002wmgtn08k0pxdx" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javaEE-基础/">javaEE_基础</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-javaSSM之框架的介绍小结" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/22/javaSSM之框架的介绍小结/" class="article-date">
  <time datetime="2019-07-22T11:42:57.000Z" itemprop="datePublished">2019-07-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/22/javaSSM之框架的介绍小结/">javaSSM之框架的介绍小结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="框架的介绍-SSM"><a href="#框架的介绍-SSM" class="headerlink" title="框架的介绍(SSM)"></a>框架的介绍(SSM)</h2><ol>
<li><p>SSM的分类以及作用：</p>
<ol>
<li>MyBatis:数据访问层框架</li>
<li>Spring：IOC、AOP</li>
<li>SpringMVC：对Servlet封装</li>
</ol>
</li>
<li><p>框架的概念：</p>
<ol>
<li><p>框架：软件的半成品，未解决问题制定的一套约束，在提供功能基础上进行扩充。</p>
</li>
<li><p>框架中一些不能被封装的代码（变量），需要使用框架者新建一个xml文件，在文件中添加变量内容。</p>
<ul>
<li>需要建立特定位置和特定名称的配置文件</li>
<li>需要使用xml解析技术和反射技术<pre><code>* 如果类固定的类只需要有xml解析
* 如果类和类中的属性都不固定，需要使用反射
</code></pre></li>
</ul>
</li>
<li><p>常用概念</p>
<ol>
<li>类库：提供的类没有封装一定逻辑<br>  举例：类库就是名言警句，写作文时引入名言警句</li>
<li>框架：区别与类库，里面有一些约束，<br>  举例：框架就是填空题</li>
</ol>
</li>
</ol>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/570911275/570911275.github.io/2019/07/22/javaSSM之框架的介绍小结/" data-id="cjyxs69i3002umgtnx6xh86dr" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javaSSM-基础/">javaSSM_基础</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JavaEE之Maven小结" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/22/JavaEE之Maven小结/" class="article-date">
  <time datetime="2019-07-22T06:35:24.000Z" itemprop="datePublished">2019-07-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/22/JavaEE之Maven小结/">JavaEE之Maven小结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h2><pre><code>1. 概念：
     Maven是一个项目管理工具，它包含了一个项目对象模型（POM：project Object Model）,一组标准集合，一个项目生命周期，一个依赖管理系统，和用来运行定义在生命周期阶段中插件目标的逻辑

2. 功能：
     1. 依赖管理：maven工程对jar包的管理过程。
     2. 一键构建：只需要一个命令，完成构建的整个过程
            *构建：清理--&gt;编译--&gt;测试--&gt;报告--&gt;打包--&gt;部署
     1. 帮助我们引用各种各样的jar包，无需我们手动引入工程目录。
     2. 进行代码编译，使得计算机可以读懂我们的代码
     3. 进行单元测验，进行bug的搜查，一个个的运行来检验代码质量
     4. 整合资源、配置文件。定型打包。如果是web项目，还可以发布到服务器

3. 优势：
     1. 节约内存；比起传统的工程项目，在jar包方面进行了大的优化，使得内存大大减少 
            * 传统：jar包在项目中
            * Maven：jar包不在项目中，jar包在jar包仓库
                 * jar包的坐标---&gt;使得项目可以在jar包仓库中找到对应的jar包

4. 安装要点
     1. 配置 MAVEN_HOME
     2. 将 %MAVEN_HOME%/bin 加入环境变量 path
     3. 添加%SystemRoot\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;进系统变量

5. Maven中仓库的种类以及彼此的关系
     1. 仓库的种类：
            * 本地仓库
            * 远程仓库【私服】
            * 中央仓库
     2. 彼此关系：
            * 情况1：无远程仓库时：打开一个Maven工程，首先前往本地仓库寻找jar包。若无此jar包。
                                 则前往中央仓库进行下载。倘若无法联网，将无法连接中央仓库，系统报错。

            * 情况2：有远程仓库时：打开一个Maven工程，首先前往本地仓库寻找jar包。若无此jar包。
                                 则前往远程仓库进行下载（此时要求，位于远程仓库所在的局域网之下）。
                                 倘若远程仓库无此jar包，则前往中央仓库下载。

            * 注：远程仓库内的jar包，部分来源于中央仓库，部分来源于内部人员上传


6. Maven项目标准目录结构：
       *  核心代码部分：src/main/java
       *  配置文件部分：src/main/resource
       *  测试代码部分：src/test/java
       *  测试配置文件：src/test/resources
       *  页面资源：js,css,图片等：src/main/webapp

7. Maven常用命令
       1. mvn clean：清理项目生产的临时文件,一般是模块下的target目录
       2. mvn package：项目打包工具,会在模块下的target目录生成jar或war等文件
       3. mvn test: 测试命令,或执行src/test/java/下junit的测试用例
       4. mvn install:模块安装命令 将打包的的jar/war文件复制到你的本地仓库中,供其他模块使用 -Dmaven.test.skip=true 跳过测试(同时会跳过test compile)
       5. mvn deploy:发布命令 将打包的文件发布到远程参考,提供其他人员进行下载依赖 ,一般是发布到公司的私服，这里我没配置私服，所以就不演示了

8. Maven生命周期：
       1. 构建过程：  清除     编译     测试     打包     安装     发布
                    clean   compile    test   package  install  deploy

       2. 清除：清理生命周期
       3. 编译——&gt;发布：默认生命周期（使用较多）：当执行后续命令时，前面的命令会跟随执行一般
       4. 站点生命周期：使用较少

9. Maven概念模型图：
      1. 依赖管理：项目对jar包的管理过程
           1. 项目对象模型：
                * 项目自身信息
                * 项目运行所依赖的jar包信息————&gt;独立出来，称为依赖管理模型（全为jar包的坐标）
                * 项目运性环境信息，比如：jdk，Tomcat信息

           2. 依赖管理模型：
              1. jar包的坐标
                    * 公司组织的名称
                    * 项目名
                    * 版本号
              2. 三个仓库

      2.  一键构建：
           1. 三个生命周期
           2. 默认生命周期：
                compile-&gt; test-&gt; package-&gt; install-&gt; deploy
               *每一个构建项目的命令都对应了maven底层的一个插件

10. 导入的包的依赖范围：
      依赖范围     对于编译classpath有效     对于测试classpath有效      对于运行时classpath有效      例子
      compile(默认)      Y                           Y                       Y                 spring-core

      test               -                           Y                       -                 Junit    

      provided           Y                           Y                       -                 servlet-api

      runtime            -                           Y                       Y                 JDBC驱动

      system             Y                           Y                       -          本地的，Maven仓库之外的类库
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/570911275/570911275.github.io/2019/07/22/JavaEE之Maven小结/" data-id="cjyxs69ej0012mgtnrhc2dns0" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javaEE-基础/">javaEE_基础</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JavaEE之修改用户练习小结" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/21/JavaEE之修改用户练习小结/" class="article-date">
  <time datetime="2019-07-21T10:14:43.000Z" itemprop="datePublished">2019-07-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/21/JavaEE之修改用户练习小结/">JavaEE之修改用户练习小结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><h3 id="修改用户练习"><a href="#修改用户练习" class="headerlink" title="修改用户练习"></a>修改用户练习</h3><ul>
<li><p>思路：</p>
<ol>
<li>点击修改按钮（携带该用户的id）</li>
<li>获取用户本身数据</li>
<li>数据回显</li>
<li>用户修改</li>
<li>修改数据</li>
<li>跳转回原界面</li>
</ol>
</li>
<li><p>文件跳转：</p>
<ol>
<li>jsp获取用户选择修改用户id</li>
<li>跳转至查找Servlet层，执行业务逻辑（找到该用户原先信息，进行回显）</li>
<li>在Servlet中，将使用到Service</li>
<li>在Service中，将使用到Dao</li>
<li>最后执行完Dao后，再次执行修改Servlet</li>
<li>获取用户输入新的数据</li>
<li>剩余同上</li>
</ol>
</li>
</ul>
<h4 id="Servlet-回显Servlet"><a href="#Servlet-回显Servlet" class="headerlink" title="Servlet___回显Servlet"></a>Servlet___回显Servlet</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">package cn.itcast.web.servlet;</span><br><span class="line"></span><br><span class="line">import cn.itcast.domain.User;</span><br><span class="line">import cn.itcast.service.UserService;</span><br><span class="line">import cn.itcast.service.impl.UserServiceImpl;</span><br><span class="line"></span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.annotation.WebServlet;</span><br><span class="line">import javax.servlet.http.HttpServlet;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line">import java.io.IOException;</span><br><span class="line"></span><br><span class="line">@WebServlet(&quot;/findUserServlet&quot;)</span><br><span class="line">public class findUserServlet extends HttpServlet &#123;</span><br><span class="line">    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">        //1.获取数据</span><br><span class="line">        String id = request.getParameter(&quot;id&quot;);</span><br><span class="line">        //2.调用Service方法</span><br><span class="line">        UserService service = new UserServiceImpl();</span><br><span class="line">        User user = service.findUserById(id);</span><br><span class="line">        //3.存储数据</span><br><span class="line">        request.setAttribute(&quot;findUser&quot;,user);</span><br><span class="line">        //4.转发到update.jsp</span><br><span class="line">        request.getRequestDispatcher(&quot;/update2.jsp&quot;).forward(request,response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">        this.doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Servlet-修改Servlet"><a href="#Servlet-修改Servlet" class="headerlink" title="Servlet___修改Servlet"></a>Servlet___修改Servlet</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">package cn.itcast.web.servlet;</span><br><span class="line"></span><br><span class="line">import cn.itcast.domain.User;</span><br><span class="line">import cn.itcast.service.UserService;</span><br><span class="line">import cn.itcast.service.impl.UserServiceImpl;</span><br><span class="line">import org.apache.commons.beanutils.BeanUtils;</span><br><span class="line"></span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.annotation.WebServlet;</span><br><span class="line">import javax.servlet.http.HttpServlet;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.lang.reflect.InvocationTargetException;</span><br><span class="line">import java.util.Map;</span><br><span class="line"></span><br><span class="line">@WebServlet(&quot;/updateUserServlet&quot;)</span><br><span class="line">public class updateUserServlet extends HttpServlet &#123;</span><br><span class="line">    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">        //设置编码</span><br><span class="line">        request.getRequestDispatcher(&quot;utf-8&quot;);</span><br><span class="line">        //获取数据</span><br><span class="line">        Map&lt;String, String[]&gt; map = request.getParameterMap();</span><br><span class="line">        //封装对象</span><br><span class="line">        User user = new User();</span><br><span class="line">        try &#123;</span><br><span class="line">            BeanUtils.populate(user,map);</span><br><span class="line">        &#125; catch (IllegalAccessException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (InvocationTargetException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        //调用Service语句更改信息</span><br><span class="line">        UserService service = new UserServiceImpl();</span><br><span class="line">        service.updateUser(user);</span><br><span class="line">        //跳转回UserListServlet</span><br><span class="line">        response.sendRedirect(request.getContextPath()+&quot;/UserListServlet&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">        this.doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">接口类</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 查找用户</span><br><span class="line">     */</span><br><span class="line">    public User findUserById(String id);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 更改数据</span><br><span class="line">     */</span><br><span class="line">    public void updateUser(User user);</span><br><span class="line"></span><br><span class="line">实现类</span><br><span class="line">    /**</span><br><span class="line">     * 查找用户</span><br><span class="line">     */</span><br><span class="line">    public User findUserById(String id)&#123;</span><br><span class="line">        return dao.findUserById(Integer.parseInt(id));</span><br><span class="line">    &#125;</span><br><span class="line">    /**</span><br><span class="line">     * 更改用户</span><br><span class="line">     */</span><br><span class="line">    public void updateUser(User user)&#123;</span><br><span class="line">        dao.updateUser(user);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h4 id="Dao"><a href="#Dao" class="headerlink" title="Dao"></a>Dao</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">接口类</span><br><span class="line">    /**</span><br><span class="line">     * 查找用户</span><br><span class="line">     */</span><br><span class="line">    public User findUserById(int id);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 更改用户</span><br><span class="line">     */</span><br><span class="line">    public void updateUser(User user);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">实现类</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 查找用户</span><br><span class="line">     */</span><br><span class="line">     public User findUserById(int id)&#123;</span><br><span class="line">         String sql = &quot;select * from user where id = ?&quot;;</span><br><span class="line">         User user = template.queryForObject(sql, new BeanPropertyRowMapper&lt;User&gt;(User.class), id);</span><br><span class="line">         return user;</span><br><span class="line">     &#125;</span><br><span class="line">    /**</span><br><span class="line">     * 更改用户</span><br><span class="line">     */</span><br><span class="line">    public void updateUser(User user)&#123;</span><br><span class="line">        String sql = &quot;update user set name=? ,gender=? ,age=? ,address=? ,qq=? ,email=? where id=?&quot;;</span><br><span class="line">        template.update(sql,user.getName(),user.getGender(),</span><br><span class="line">                user.getAge(),user.getAddress(),user.getQq(),</span><br><span class="line">                user.getEmail(),user.getId());</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/570911275/570911275.github.io/2019/07/21/JavaEE之修改用户练习小结/" data-id="cjyxs69fg001imgtngzmois3i" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javaEE-基础/">javaEE_基础</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JavaEE之添加用户练习小结" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/21/JavaEE之添加用户练习小结/" class="article-date">
  <time datetime="2019-07-21T08:24:43.000Z" itemprop="datePublished">2019-07-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/21/JavaEE之添加用户练习小结/">JavaEE之添加用户练习小结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><h3 id="添加用户练习"><a href="#添加用户练习" class="headerlink" title="添加用户练习"></a>添加用户练习</h3><ul>
<li><p>思路：</p>
<ol>
<li>点击添加按钮</li>
<li>获取新用户数据</li>
<li>添加数据</li>
<li>跳转回原界面</li>
</ol>
</li>
<li><p>文件跳转：</p>
<ol>
<li>jsp获取用户输入新用户信息</li>
<li>跳转至Servlet层，执行业务逻辑</li>
<li>在Servlet中，将使用到Service</li>
<li>在Service中，将使用到Dao</li>
</ol>
</li>
</ul>
<h4 id="Servlet"><a href="#Servlet" class="headerlink" title="Servlet"></a>Servlet</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">package cn.itcast.web.servlet;</span><br><span class="line"></span><br><span class="line">import cn.itcast.domain.User;</span><br><span class="line">import cn.itcast.service.UserService;</span><br><span class="line">import cn.itcast.service.impl.UserServiceImpl;</span><br><span class="line">import org.apache.commons.beanutils.BeanUtils;</span><br><span class="line">import org.springframework.jdbc.core.BeanPropertyRowMapper;</span><br><span class="line"></span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.annotation.WebServlet;</span><br><span class="line">import javax.servlet.http.HttpServlet;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.lang.reflect.InvocationTargetException;</span><br><span class="line">import java.util.Map;</span><br><span class="line"></span><br><span class="line">@WebServlet(&quot;/addUserServlet&quot;)</span><br><span class="line">public class addUserServlet extends HttpServlet &#123;</span><br><span class="line">    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">        //1.设置编码</span><br><span class="line">        request.setCharacterEncoding(&quot;utf-8&quot;);</span><br><span class="line">        //2.获取数据</span><br><span class="line">        Map&lt;String, String[]&gt; map = request.getParameterMap();</span><br><span class="line">        //3.封装User对象</span><br><span class="line">        User user = new User();</span><br><span class="line">        try &#123;</span><br><span class="line">            BeanUtils.populate(user,map);</span><br><span class="line">        &#125; catch (IllegalAccessException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (InvocationTargetException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        //4.调用Service方法添加数据</span><br><span class="line">        UserService service = new UserServiceImpl();</span><br><span class="line">        service.addUser(user);</span><br><span class="line">        //5.跳转到userListServlet</span><br><span class="line">        response.sendRedirect(request.getContextPath()+&quot;/UserListServlet&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">        this.doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">接口类</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 添加用户</span><br><span class="line">     */</span><br><span class="line">    public void  addUser(User user);</span><br><span class="line"></span><br><span class="line">实现类</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 添加用户</span><br><span class="line">     * @param user</span><br><span class="line">     */</span><br><span class="line">    @Override</span><br><span class="line">    public void addUser(User user) &#123;</span><br><span class="line">       dao.addUser(user);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h4 id="Dao"><a href="#Dao" class="headerlink" title="Dao"></a>Dao</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">接口类</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 添加用户</span><br><span class="line">     */</span><br><span class="line">    public void addUser(User user);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">实现类</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 添加用户</span><br><span class="line">     * @param user</span><br><span class="line">     */</span><br><span class="line">    public void addUser(User user)&#123;</span><br><span class="line">        //1.定义SQL</span><br><span class="line">        String sql = &quot;insert into user values(null,?,?,?,?,?,?,null,null)&quot;;</span><br><span class="line">        //2.执行SQL</span><br><span class="line">        template.update(sql,user.getName(),user.getGender(),user.getAge(),</span><br><span class="line">                            user.getAddress(),user.getQq(),user.getEmail());</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/570911275/570911275.github.io/2019/07/21/JavaEE之添加用户练习小结/" data-id="cjyxs69fp001mmgtnjr7gq4j2" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javaEE-基础/">javaEE_基础</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JavaEE之删除用户练习小结" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/21/JavaEE之删除用户练习小结/" class="article-date">
  <time datetime="2019-07-21T08:24:43.000Z" itemprop="datePublished">2019-07-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/21/JavaEE之删除用户练习小结/">JavaEE之删除用户练习小结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><h3 id="删除用户练习"><a href="#删除用户练习" class="headerlink" title="删除用户练习"></a>删除用户练习</h3><ul>
<li><p>思路：</p>
<ol>
<li>点击删除按钮（携带该用户的id）</li>
<li>跳转确认画面，让客户确认是否删除</li>
<li>确认删除后</li>
<li>删除数据</li>
<li>跳转回原界面</li>
</ol>
</li>
<li><p>文件跳转：</p>
<ol>
<li>jsp获取用户选择删除用户id</li>
<li>跳转至Servlet层，执行业务逻辑</li>
<li>在Servlet中，将使用到Service</li>
<li>在Service中，将使用到Dao</li>
</ol>
</li>
</ul>
<h4 id="Servleet"><a href="#Servleet" class="headerlink" title="Servleet"></a>Servleet</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">package cn.itcast.web.servlet;</span><br><span class="line"></span><br><span class="line">import cn.itcast.service.UserService;</span><br><span class="line">import cn.itcast.service.impl.UserServiceImpl;</span><br><span class="line"></span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.annotation.WebServlet;</span><br><span class="line">import javax.servlet.http.HttpServlet;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line">import java.io.IOException;</span><br><span class="line"></span><br><span class="line">@WebServlet(&quot;/delUserServlet&quot;)</span><br><span class="line">public class delUserServlet extends HttpServlet &#123;</span><br><span class="line">    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">        //1.获取id</span><br><span class="line">        String id = request.getParameter(&quot;id&quot;);</span><br><span class="line">        //2.调用Service</span><br><span class="line">        UserService service = new UserServiceImpl();</span><br><span class="line">        service.delUser(id);</span><br><span class="line">        //3.跳转回/UserListServlet</span><br><span class="line">        response.sendRedirect(request.getContextPath()+&quot;/UserListServlet&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">        this.doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">接口类</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 删除用户</span><br><span class="line">     */</span><br><span class="line">    public void delUser(String id);</span><br><span class="line"></span><br><span class="line">实现类</span><br><span class="line">    /**</span><br><span class="line">     * 删除用户</span><br><span class="line">     */</span><br><span class="line">     public void delUser(String id)&#123;</span><br><span class="line">         dao.delUser(Integer.parseInt(id));</span><br><span class="line">     &#125;;</span><br></pre></td></tr></table></figure>
<h4 id="Dao"><a href="#Dao" class="headerlink" title="Dao"></a>Dao</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">接口类</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 删除用户</span><br><span class="line">     */</span><br><span class="line">    public void delUser(int id);</span><br><span class="line"></span><br><span class="line">实现类</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 删除用户</span><br><span class="line">     * @param id</span><br><span class="line">     */</span><br><span class="line">    public void delUser(int id)&#123;</span><br><span class="line">        //定义SQL</span><br><span class="line">        String sql = &quot;delete from user where id = ?&quot;;</span><br><span class="line">        //执行SQL</span><br><span class="line">        template.update(sql,id);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/570911275/570911275.github.io/2019/07/21/JavaEE之删除用户练习小结/" data-id="cjyxs69fk001kmgtn58nsgefv" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javaEE-基础/">javaEE_基础</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/3/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/javaEE-基础/">javaEE_基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javaSSM-基础/">javaSSM_基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java-基础/">java_基础</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/javaEE-基础/" style="font-size: 20px;">javaEE_基础</a> <a href="/tags/javaSSM-基础/" style="font-size: 10px;">javaSSM_基础</a> <a href="/tags/java-基础/" style="font-size: 15px;">java_基础</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/08/04/新文档8080/">(no title)</a>
          </li>
        
          <li>
            <a href="/2019/08/03/javaSSM之SpringMVC快速入门之上小结/">javaSSM之SpringMVC快速入门之上小结</a>
          </li>
        
          <li>
            <a href="/2019/08/02/javaSSM之SpringMVC之Restful小结/">javaSSM之SpringMVC之Restful小结</a>
          </li>
        
          <li>
            <a href="/2019/08/01/javaSSM之Spring之AOP小结小结/">javaSSM之Spring之AOP小结小结</a>
          </li>
        
          <li>
            <a href="/2019/07/26/javaSSM之Spring快速入门之下小结/">javaSSM之Spring快速入门之中小结</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>