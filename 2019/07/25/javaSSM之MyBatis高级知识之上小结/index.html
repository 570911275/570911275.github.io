<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>javaSSM之MyBatis高级知识之上小结 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="MyBatis1. 基础知识（重点，内容多）     对原生态jdbc程序（单独使用jdbc开发）问题总结     mybatis框架原理（掌握）     mybatis入门程序          用户的增删改查     mybatis开发两种方法：          原始dao开发方法（程序需要编写dao接口和dao实现类）（掌握）          mybaits的mapper接口（相当于da">
<meta name="keywords" content="javaSSM_基础">
<meta property="og:type" content="article">
<meta property="og:title" content="javaSSM之MyBatis高级知识之上小结">
<meta property="og:url" content="https://github.com/570911275/570911275.github.io/2019/07/25/javaSSM之MyBatis高级知识之上小结/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="MyBatis1. 基础知识（重点，内容多）     对原生态jdbc程序（单独使用jdbc开发）问题总结     mybatis框架原理（掌握）     mybatis入门程序          用户的增删改查     mybatis开发两种方法：          原始dao开发方法（程序需要编写dao接口和dao实现类）（掌握）          mybaits的mapper接口（相当于da">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-08-05T02:28:33.752Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="javaSSM之MyBatis高级知识之上小结">
<meta name="twitter:description" content="MyBatis1. 基础知识（重点，内容多）     对原生态jdbc程序（单独使用jdbc开发）问题总结     mybatis框架原理（掌握）     mybatis入门程序          用户的增删改查     mybatis开发两种方法：          原始dao开发方法（程序需要编写dao接口和dao实现类）（掌握）          mybaits的mapper接口（相当于da">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://github.com/570911275/570911275.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-javaSSM之MyBatis高级知识之上小结" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/25/javaSSM之MyBatis高级知识之上小结/" class="article-date">
  <time datetime="2019-07-25T02:42:26.000Z" itemprop="datePublished">2019-07-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      javaSSM之MyBatis高级知识之上小结
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h2><pre><code>1. 基础知识（重点，内容多）
    对原生态jdbc程序（单独使用jdbc开发）问题总结
    mybatis框架原理（掌握）
    mybatis入门程序
         用户的增删改查
    mybatis开发两种方法：
         原始dao开发方法（程序需要编写dao接口和dao实现类）（掌握）
         mybaits的mapper接口（相当于dao接口）代理开发方法（掌握）
    mybatis配置文件SqlMapConfig.xml
    mybatis核心：
         mybatis输入映射（掌握）
         mybatis输出映射（掌握）
    mybatis的动态SQL（掌握）

 2. 高级知识
    订单商品数据模型分析
    高级结果集映射（一对一，一对多，多对多）
    mybatis延迟加载
    mybatis查询缓冲（一级缓冲、二级缓冲）
    mybaits和spring进行整合（掌握）
    mybatis逆向工程
</code></pre><h3 id="一、高级知识"><a href="#一、高级知识" class="headerlink" title="一、高级知识"></a>一、高级知识</h3><h4 id="1-订单商品数据模型分析"><a href="#1-订单商品数据模型分析" class="headerlink" title="1. 订单商品数据模型分析"></a>1. 订单商品数据模型分析</h4><pre><code>1.1 数据模型分析思路：
     1. 每张表记录的数据内容：
          * 分模块对每张表记录的内容进行熟悉，相当于你学习系统需求（功能）的过程
     2. 每张表重要的字段设置：
          * 非空字段、外键字段
     3. 数据库级别表与表之间的关系
          * 外键关系
     4. 表与表之间的业务关系
          * 在分析表与表之间的业务关系时一定要建立在某个业务意义基础上去分析 
</code></pre><h4 id="2-高级结果集映射（一对一，一对多，多对多）"><a href="#2-高级结果集映射（一对一，一对多，多对多）" class="headerlink" title="2. 高级结果集映射（一对一，一对多，多对多）"></a>2. 高级结果集映射（一对一，一对多，多对多）</h4><pre><code>2.1 一对一查询：
     * 查询订单信息，关联查询创建订单的用户信息
  2.1.1 resultType
    2.1.1.1 SQL语句
           1. 确定查询的主表：订单表
           2. 确定查询的关联表：用户表
               * 关联查询使用内连接还是外连接
                    * 由于orders表中有一个外键（user_id），通过外键关联查询用户表只能查询出来一条记录
                    * 因此可以内连接
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">SQL语句：</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">       orders.*,</span><br><span class="line">       user.`sex`,</span><br><span class="line">       user.`address`,</span><br><span class="line">       user.`birthday`,</span><br><span class="line">       user.`username`     </span><br><span class="line">FROM</span><br><span class="line"> orders,USER </span><br><span class="line"> WHERE orders.`user_id`=user.`id`</span><br></pre></td></tr></table></figure>
<pre><code>2.1.1.2 创建pojo
        1. 将上边SQL查询的结果映射到pojo中，pojo中必须包含所有的查询列名
            * 原始的Order.java不能映射全部字段，需要新创建的pojo
            * 解决方法：创建一个pojo继承包括查询字段较多的po类

2.1.1.3 mapper.xml
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--查询订单关联用户信息--&gt;</span><br><span class="line">&lt;select id=&quot;findOrderUser&quot;  resultMap=&quot;cn.itcast.po.OrdersCustom&quot;&gt;</span><br><span class="line">    SELECT</span><br><span class="line">   orders.*,</span><br><span class="line">   user.`sex`,</span><br><span class="line">   user.`address`,</span><br><span class="line">   user.`birthday`,</span><br><span class="line">   user.`username`</span><br><span class="line">   FROM</span><br><span class="line">   orders,USER</span><br><span class="line">   WHERE orders.`user_id`=user.`id`</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<pre><code>2.1.1.4 mapper.java
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public interface OrdersMapperCustom &#123;</span><br><span class="line">    //查询订单关联用户信息</span><br><span class="line">    public List&lt;OrdersCustom&gt; findOrdersUser() throws Exception;</span><br><span class="line">&#125;</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">         2.1.2 resultMap</span><br><span class="line">           2.1.2.1 SQL语句</span><br><span class="line">               * 同resultType一样</span><br><span class="line">           2.1.2.2 定义resultMap</span><br></pre></td></tr></table></figure>
<pre><code>&lt;!--订单查询关联用户的resultMap
    将整个查询的结果映射额到cn.itcast.po.Orders中
    --&gt;
&lt;resultMap type=&quot;cn.itcast.po.Orders&quot; id=&quot;OrdersUserResultMap&quot;&gt;
        &lt;!--配置映射的订单信息--&gt;
        &lt;!--id:指定查询列中的唯一标识，订单信息中的唯一标识，如果有多个列组成唯一标识，配置多个id
            column：订单信息的唯一标识列
            property：订单信息的唯一标识列所映射到Orders中的哪一个属性
            --&gt;
    &lt;id column=&quot;id&quot; property=&quot;id&quot;/&gt;
    &lt;result column=&quot;user_id&quot; property=&quot;userId&quot;/&gt;
    &lt;result column=&quot;number&quot; property=&quot;number&quot;/&gt;
    &lt;result column=&quot;createtime&quot; property=&quot;createtime&quot;/&gt;
    &lt;result column=&quot;note&quot; property=&quot;note&quot;/&gt;

    &lt;!--配置映射的关联的用户信息--&gt;
    &lt;!--association:用于映射关联查询单个对象的信息
        property:要将关联查询的用户信息映射到Orders中的哪一个属性--&gt;
    &lt;association property=&quot;user&quot; javaType=&quot;cn.itcast.po.User&quot; &gt;
        &lt;!--id:关联用户的唯一标识
            column：指定唯一标识用户信息的列
            JavaType：映射到user的哪一个属性--&gt;
        &lt;id column=&quot;user_id&quot; property=&quot;id&quot;/&gt;
        &lt;result column=&quot;usernmae&quot; property=&quot;username&quot;/&gt;
        &lt;result column=&quot;address&quot; property=&quot;address&quot;/&gt;
        &lt;result column=&quot;birthday&quot; property=&quot;birthday&quot;/&gt;
        &lt;result column=&quot;sex&quot; property=&quot;sex&quot;/&gt;
    &lt;/association&gt;
&lt;/resultMap&gt;
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2.1.2.3 mapper.xml</span><br></pre></td></tr></table></figure>
<pre><code>&lt;select id=&quot;findOrdersUserResultMap&quot;  resultMap=&quot;OrdersUserResultMap&quot;&gt;
    SELECT
   orders.*,
   user.`sex`,
   user.`address`,
   user.`birthday`,
   user.`username`
   FROM
   orders,USER
   WHERE orders.`user_id`=user.`id`
&lt;/select&gt;
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2.1.2.3 mapper.java</span><br></pre></td></tr></table></figure>
<pre><code>//查询订单关联用户信息使用resultMap
public List&lt;Orders&gt; findOrdersUserResultMap() throws Exception;
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2.1.2.3 Orders.java</span><br></pre></td></tr></table></figure>
<pre><code>private User user;
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">     </span><br><span class="line">    </span><br><span class="line">  2.1.3 resultType和resultMap实现一对一查询小结</span><br><span class="line">        * resultType:使用resultType实现较为简单，如果pojo中没有包括查询出来的列名。需要增加列名对应的属性，即可完成映射</span><br><span class="line">        * 如果没有查询结果的特殊要求建议使用resultType</span><br><span class="line"></span><br><span class="line">        * resultMap：需要单独定义resultMap,实现有点麻烦，如果对查询结果有特殊要求，使用resultMap可以完成将关联查询映射pojo的属性中</span><br><span class="line"></span><br><span class="line">        * resultMap可以实现延迟加载，resultType无法实现延迟加载</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2.2 一对多查询</span><br><span class="line">   * 查询订单及订单明细的信息</span><br><span class="line">  2.2.1 SQL语句</span><br><span class="line">      * 确定主查询表：订单表</span><br><span class="line">      * 确定关联查询表：订单明细  </span><br><span class="line">      * 在一对以查询继承上添加订单明细表关联即可   </span><br><span class="line">      * **在此处对orderDetails.id设置别名，避免与orders.id发送冲突**</span><br></pre></td></tr></table></figure>
<p>SQL语句：<br>        SELECT<br>       orders.*,<br>       orderdetail.<code>id</code> orderdetail_id,<br>       orderdetail.<code>orders_id</code>,<br>       orderdetail.<code>items_id</code>,<br>       orderdetail.<code>items_num</code>,<br>       user.<code>sex</code>,<br>       user.<code>address</code>,<br>       user.<code>birthday</code>,<br>       user.<code>username</code></p>
<pre><code>FROM
orders,USER,orderdetail
WHERE orders.`user_id`=user.`id` AND orderdetail.`orders_id`=orders.`id`
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">2.2.2 分析：</span><br><span class="line">   * 使用resultType将上边的查询结果映射到pojo中，订单信息就是重复</span><br><span class="line">   * 要求：</span><br><span class="line">       * 对orders映射不能出现重复记录</span><br><span class="line">   * 方法：</span><br><span class="line">       * 在orders.java类中添加List&lt;orderDetail&gt;orderDetails属性</span><br><span class="line">       * 最终会将订单信息映射到orders中，订单所对应的订单明细映射到orders中的orderDetails属性中。</span><br><span class="line">       * 映射成的orders记录数为两条(orders信息不重复)</span><br><span class="line">       * 每个orders中的orderDetails属性存储了该订单过对应的订单明细</span><br><span class="line"></span><br><span class="line">2.2.3 在orders.java类中添加List&lt;orderDetail&gt;orderDetails属性</span><br></pre></td></tr></table></figure>
<pre><code>//订单明细
private List&lt;Orderdetail&gt; orderdetails;
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">2.2.4 定义resultMap</span><br><span class="line">       * 使用了继承</span><br></pre></td></tr></table></figure>
<pre><code>&lt;!--订单及订单明细的resultMap--&gt;
&lt;!--使用extends继承，不用在中配置订单信息和用户信息的映射--&gt;
&lt;resultMap type=&quot;cn.itcast.po.Orders&quot; id=&quot;findOrdersAndOrderDetailResultMap&quot; extends=&quot;OrdersUserResultMap&quot;&gt;
    &lt;!--订单信息--&gt;
    &lt;!--用户信息--&gt;
    &lt;!--使用extends继承，不用在中配置订单信息和用户信息的映射--&gt;
    &lt;!--订单明细信息--&gt;
    &lt;!--一个订单关联查询出来多条明细，要使用collection进行映射
        collection：对关联查询到多条记录映射到集合对象中
        association:用于映射关联查询单个对象的信息
        一个多个，一个单个
        property:要将关联查询的多条记录映射到Orders中的哪一个属性
        ofType:指定映射到list集合属性中pojo的类型--&gt;
    &lt;collection property=&quot;orderdetails&quot; ofType=&quot;cn.itcast.po.Orderdetail&quot;&gt;
        &lt;!--id:订单明细的唯一标识
            property:要将订单明细中的唯一标识映射到Orderdetail的哪一个属性--&gt;
        &lt;id column=&quot;orderdetail_id&quot; property=&quot;id&quot;/&gt;
        &lt;result column=&quot;orders_id&quot; property=&quot;ordersId&quot;/&gt;
        &lt;result column=&quot;items_id&quot; property=&quot;itemsId&quot;/&gt;
        &lt;result column=&quot;items_num&quot; property=&quot;itemsNum&quot;/&gt;
    &lt;/collection&gt;
&lt;/resultMap&gt;
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">2.2.5 mapper.xml</span><br></pre></td></tr></table></figure>
<pre><code>&lt;!--查询订单关联用户信息以及订单明细，使用resultMap--&gt;
&lt;select id=&quot;findOrdersAndOrderDetailResultMap&quot;  resultMap=&quot;findOrdersAndOrderDetailResultMap&quot;&gt;
   SELECT
   orders.*,
   orderdetail.id orderdetail_id,
   orderdetail.`orders_id`,
   orderdetail.`items_id`,
   orderdetail.`items_num`,
   user.`sex`,
   user.`address`,
   user.`username`

   FROM
   orders,USER,orderdetail
   WHERE orders.`user_id`=user.`id` AND orderdetail.`orders_id`=orders.`id`
&lt;/select&gt;
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2.2.6 mapper.java</span><br></pre></td></tr></table></figure>
<pre><code>//查询订单(关联用户)及订单明细
public List&lt;Orders&gt; findOrdersAndOrderDetailResultMap() throws  Exception;
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2.2.7 测试类</span><br></pre></td></tr></table></figure>
<pre><code>public void findOrdersAndOrderDetailResultMap() throws Exception {
    //mybatis配置文件
    String resource = &quot;SqlMapConfig.xml&quot;;
    //得到配置文件流
    InputStream inputStream = Resources.getResourceAsStream(resource);
    //创建会话工厂,传入mybatis的配置文件信息
    SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);
    SqlSession sqlSession = sqlSessionFactory.openSession();
    //创建OrdersMapperCustom对象，mybatis自动生成OrderMapperCustom代理对象
    OrdersMapperCustom ordersMapperCustom = sqlSession.getMapper(OrdersMapperCustom.class);

    List&lt;Orders&gt; list = ordersMapperCustom.findOrdersAndOrderDetailResultMap();

    System.out.println(list);

    sqlSession.close();

}
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  2.2.8 小结</span><br><span class="line">      * mybatis使用resultMap的collection对关联查询的多条记录映射到一个list集合属性汇总。</span><br><span class="line">      * 使用resultType实现：</span><br><span class="line">           * 将订单明细映射到orders中的orderdetails中，需要自己处理，使用双重循环遍历，去掉重复记录，将订单明细放在orderdetails中</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2.3 多对多查询</span><br><span class="line">   * 查询用户及用户购买商品信息</span><br><span class="line"></span><br><span class="line">  2.3.1 SQL语句</span><br><span class="line">     * 查询主表是：用户表</span><br><span class="line">     * 关联表：由于用户和商品没有直接关联，通过订单和订单明细进行关联</span><br><span class="line">     * 所以关联表是：orders、orderdetails、items</span><br></pre></td></tr></table></figure>
<pre><code> SELECT
orders.*,
items.`id` items_id,
items.`name` items_name,
items.`detail` items_detail,
items.`price` items_price,
orderdetail.`id` orderdetail_id,
orderdetail.`orders_id`,
orderdetail.`items_id`,
orderdetail.`items_num`,
user.`sex`,
user.`address`,
user.`birthday`,
user.`username`

FROM
orders,USER,orderdetail,items
WHERE orders.`user_id`=user.`id`
 AND orderdetail.`orders_id`=orders.`id`
 AND orderdetail.`items_id`=items.`id`
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">2.3.2 映射思路 </span><br><span class="line">   * 将用户信息映射到user中</span><br><span class="line">   * 在user类中添加订单列表属性List&lt;Orders&gt;ordersList，将用户创建的订单映射到ordersList</span><br><span class="line">   * 在Orders中添加订单明细列表属性List&lt;OrderDetail&gt;orderdetail,将订单的明细映射到orderdetail</span><br><span class="line">   * 在OrderDetail中添加items属性，将订单明细所对应的商品映射到items</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2.3.3 定义resultMap</span><br><span class="line">   * 无法使用继承</span><br><span class="line">   * 通过表与表之间的对应关系，进行连接</span><br></pre></td></tr></table></figure>
<pre><code>&lt;!--查询订单关联用户信息与商品信息的resultMap--&gt;
&lt;resultMap type=&quot;cn.itcast.po.User&quot;   id=&quot;findUserAndItemsResultMap&quot; &gt;
    &lt;!--用户信息--&gt;
    &lt;id column=&quot;user_id&quot; property=&quot;id&quot;/&gt;
    &lt;result column=&quot;username&quot; property=&quot;username&quot;/&gt;
    &lt;result column=&quot;address&quot; property=&quot;address&quot;/&gt;
    &lt;result column=&quot;sex&quot; property=&quot;sex&quot;/&gt;

    &lt;!--订单信息--&gt;
    &lt;!--一个用户对应多个订单--&gt;
    &lt;collection property=&quot;ordersList&quot; ofType=&quot;cn.itcast.po.Orders&quot; &gt;
        &lt;id column=&quot;id&quot; property=&quot;id&quot;/&gt;
        &lt;result column=&quot;user_id&quot; property=&quot;userId&quot;/&gt;
        &lt;result column=&quot;number&quot; property=&quot;number&quot;/&gt;
        &lt;result column=&quot;createtime&quot; property=&quot;createtime&quot;/&gt;
        &lt;result column=&quot;note&quot; property=&quot;note&quot;/&gt;


            &lt;!--订单明细--&gt;
            &lt;!--一个订单对应多个订单明细--&gt;
            &lt;collection property=&quot;orderdetails&quot; ofType=&quot;cn.itcast.po.Orderdetail&quot; &gt;
                &lt;id column=&quot;orderdetail_id&quot; property=&quot;id&quot;/&gt;
                &lt;result column=&quot;orders_id&quot; property=&quot;ordersId&quot;/&gt;
                &lt;result column=&quot;items_id&quot; property=&quot;itemsId&quot;/&gt;
                &lt;result column=&quot;items_num&quot; property=&quot;itemsNum&quot;/&gt;

                    &lt;!--商品信息--&gt;
                    &lt;!--一个订单明细对呀一个商品信息--&gt;
                    &lt;association property=&quot;items&quot; javaType=&quot;cn.itcast.po.Items&quot;&gt;
                        &lt;id  column=&quot;items_id&quot; property=&quot;id&quot;/&gt;
                        &lt;result column=&quot;items_name&quot; property=&quot;name&quot;/&gt;
                        &lt;result column=&quot;items_detail&quot; property=&quot;detail&quot;/&gt;
                        &lt;result column=&quot;items_price&quot; property=&quot;price&quot;/&gt;

                    &lt;/association&gt;

            &lt;/collection&gt;

    &lt;/collection&gt;

&lt;/resultMap&gt;
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">2.3.4 mapper.xml</span><br></pre></td></tr></table></figure>
<pre><code>&lt;select id=&quot;findUserAndItemsResultMap&quot;  resultMap=&quot;findUserAndItemsResultMap&quot;&gt;
    SELECT
   orders.*,
   items.`id` items_id,
   items.`name` items_name,
   items.`detail` items_detail,
   items.`price` items_price,
   orderdetail.`id` orderdetail_id,
   orderdetail.`orders_id`,
   orderdetail.`items_id`,
   orderdetail.`items_num`,
   user.`sex`,
   user.`address`,
   user.`birthday`,
   user.`username`

   FROM
   orders,USER,orderdetail,items
   WHERE orders.`user_id`=user.`id`
    AND orderdetail.`orders_id`=orders.`id`
    AND orderdetail.`items_id`=items.`id`
&lt;/select&gt;
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">2.3.5 mapper.java</span><br></pre></td></tr></table></figure>
<pre><code>//查询用户以及购买的商品信息
public List&lt;User&gt; findUserAndItemsResultMap() throws Exception;
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2.3.6 测试类</span><br></pre></td></tr></table></figure>
<pre><code>List&lt;User&gt; list = ordersMapperCustom.findUserAndItemsResultMap();
</code></pre><p><code>`</code><br>         2.3.7 小结</p>
<pre><code>       * 将查询用户购买的商品信息明细清单，(用户名、用户地址、购买商品名称、购买商品时间、购买商品数量)
       * 针对上边的需求就使用resultType将查询到的记录映射到一个扩展的pojo中，很简单师兄明细清单的功能

3.高级结果集映射（一对一，一对多，多对多）小结
    * 一对多是多对多的特例，如下需求：
        查询用户购买的商品信息，用户和商品的关系是多对多关系。
          需求1：
            查询字段：用户账号、用户名称、用户性别、商品名称、商品价格(最常见)
            企业开发中常见明细列表，用户购买商品明细列表，
            使用resultType将上边查询列映射到pojo输出。

          需求2：
            查询字段：用户账号、用户名称、购买商品数量、商品明细（鼠标移上显示明细）
            使用resultMap将用户购买的商品明细列表映射到user对象中。
    * 对查询结果映射有特殊要求的使用resultMap，比如要求映射成list中包含多个list

4.resultType与resultMap小结
    1. resultType：
        作用：
            将查询结果按照sql列名pojo属性名一致性映射到pojo中。
        场合：
            常见一些明细记录的展示，比如用户购买商品明细，将关联查询信息全部展示在页面时，此时可直接使用resultType将每一条记录映射到pojo中，在前端页面遍历list（list中是pojo）即可。

    2. resultMap：
        使用association和collection完成一对一和一对多高级映射（对结果有特殊的映射要求）。

        1. association：
        作用：
            将关联查询信息映射到一个pojo对象中。
        场合：
            为了方便查询关联信息可以使用association将关联订单信息映射为用户对象的pojo属性中，比如：查询订单及关联用户信息。
            使用resultType无法将查询结果映射到pojo对象的pojo属性中，根据对结果集查询遍历的需要选择使用resultType还是resultMap。

        2. collection：
        作用：
            将关联查询信息映射到一个list集合中。
        场合：
            为了方便查询遍历关联信息可以使用collection将关联信息映射到list集合中，比如：查询用户权限范围模块及模块下的菜单，可使用collection将模块映射到模块list中，将菜单列表映射到模块对象的菜单list属性中，这样的作的目的也是方便对查询结果集进行遍历查询。
            如果使用resultType无法将查询结果映射到list集合中。
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/570911275/570911275.github.io/2019/07/25/javaSSM之MyBatis高级知识之上小结/" data-id="cjzdf8zob004644tnnv7cul1j" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javaSSM-基础/">javaSSM_基础</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/07/25/javaSSM之MyBatis高级知识之中小结/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          javaSSM之MyBatis高级知识之中小结
        
      </div>
    </a>
  
  
    <a href="/2019/07/24/javaSSM之MyBatis基础知识之下小结/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">javaSSM之MyBatis基础知识之下小结</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/javaEE-基础/">javaEE_基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javaSSM-基础/">javaSSM_基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java-基础/">java_基础</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/javaEE-基础/" style="font-size: 20px;">javaEE_基础</a> <a href="/tags/javaSSM-基础/" style="font-size: 10px;">javaSSM_基础</a> <a href="/tags/java-基础/" style="font-size: 15px;">java_基础</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/08/16/SQL总结/">(no title)</a>
          </li>
        
          <li>
            <a href="/2019/08/12/新文档123/">(no title)</a>
          </li>
        
          <li>
            <a href="/2019/08/03/新文档8080/">javaSSM之SpringMVC快速入门之中小结</a>
          </li>
        
          <li>
            <a href="/2019/08/03/javaSSM之SpringMVC快速入门之上小结/">javaSSM之SpringMVC快速入门之上小结</a>
          </li>
        
          <li>
            <a href="/2019/08/02/javaSSM之SpringMVC之Restful小结/">javaSSM之SpringMVC之Restful小结</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>